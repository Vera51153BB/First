/* -*- coding: utf-8 -*-
 * First/assets/css/chart.css
 * CHANGELOG (важное):
 *  - Убрали кнопку «Полки» из док-строки (превью) — теперь только внутри панели.
 *  - Кнопка сворачивания панели — слева, иконка ▼.
 *  - Панель НЕ закрывается при выборе ТФ (поведение в JS), стили без анимации высоты.
 */

/* Базовые переменные */
:root{
  --bg:#0b0f14; --text:#e6e6e6; --muted:#9aa4af; --accent:#ffd65c; --danger:#ff6b6b;
  --pad: clamp(10px, 2.5vw, 14px);
  --radius: 12px;

  --dock-h: clamp(46px, 8vw, 56px);
  --panel-h: min(64vh, 480px); /* CHANGE: чуть выше панели на мобилке */
}

html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Arial}
#wrap{height:100%;display:flex;flex-direction:column}
header{padding:10px 14px;font-weight:600;letter-spacing:.3px}
#chart{flex:1;min-height:320px}

/* Док-строка */
footer#dock{
  position:relative;height:var(--dock-h);min-height:var(--dock-h);max-height:var(--dock-h);
  border-top:1px solid rgba(255,255,255,.08);
  padding:0 var(--pad);display:flex;align-items:center;gap:10px;
  background:rgba(255,255,255,0.02);
}
#status-dot{width:10px;height:10px;border-radius:50%;box-shadow:0 0 0 2px rgba(255,255,255,.06) inset}
#status-dot.online{background:#34c759}
#status-dot.degraded{background:#ffd60a}
#status-dot.offline{background:#ff453a}
#status-text{color:var(--muted);font-size:14px}
.spacer{flex:1}
#btn-panel{
  background:transparent;color:var(--text);
  border:1px solid rgba(255,255,255,.18);
  border-radius:var(--radius);
  padding:8px 12px;cursor:pointer;font:inherit;line-height:1.1;
}
#btn-panel[aria-expanded="true"]{border-color:rgba(255,255,255,.65)}

#btn-status-info{
  background:transparent;color:var(--muted);
  border:1px solid rgba(255,255,255,.18);border-radius:var(--radius);
  padding:6px 10px;cursor:pointer;font:inherit;line-height:1.1;margin-left:6px;
}
#btn-status-info:hover{border-color:rgba(255,255,255,.35)}
#btn-status-info[aria-expanded="true"]{border-color:rgba(255,255,255,.65)}

/* Панель */
#panel{
  position:fixed;left:0;right:0;bottom:0;height:var(--panel-h);
  background:rgba(10,14,19,.98);
  border-top:1px solid rgba(255,255,255,.08);
  box-shadow:0 -10px 30px rgba(0,0,0,.35);
  transform:translateY(100%);transition:transform .25s ease;
  display:grid;grid-template-rows:auto 1fr;z-index:50;
}
#panel.open{transform:translateY(0%)}

/* Заголовок панели */
#panel-head{
  display:flex;align-items:center;gap:10px;
  padding:10px var(--pad);
  border-bottom:1px solid rgba(255,255,255,.08);
}
#panel-title{font-weight:600}

/* CHANGE: кнопка «свернуть» слева, в виде треугольника вниз */
#btn-collapse{
  background:transparent;color:var(--text);
  border:1px solid rgba(255,255,255,.18);
  border-radius:var(--radius);padding:6px 10px;cursor:pointer;font:inherit;
}

#panel-body{display:grid;grid-template-rows:auto auto auto auto;gap:10px;padding:var(--pad)}
.row{display:flex;align-items:center;gap:10px;min-height:0;flex-wrap:wrap}
.row a,.row button{
  background:transparent;color:var(--text);
  border:1px solid rgba(255,255,255,.18);
  border-radius:var(--radius);padding:8px 12px;
  cursor:pointer;text-decoration:none;font:inherit;line-height:1.1;white-space:nowrap;
}
.row a:hover,.row button:hover{border-color:rgba(255,255,255,.35)}
.row .muted{color:var(--muted);border-color:rgba(255,255,255,.12)}
.row .danger{color:var(--danger);border-color:rgba(255,0,0,.25)}
.row .star.active{background:rgba(255,214,92,.08);border-color:rgba(255,214,92,.8);color:var(--accent)}
.row .active{border-color:rgba(255,255,255,.65)}
#last-upd{color:var(--muted);margin-left:auto}

/* CHANGE: кнопка Полки внутри панели — слегка выделена */
button.shelves{margin-left:auto}

/* Прямые ссылки внизу панели */
.links{display:flex;gap:18px;padding:0 var(--pad) 6px var(--pad)}
.links a{text-decoration:none}
.links .danger{color:var(--danger)}

/* Поповер статуса */
#status-popover{position:fixed;left:12px;right:12px;bottom:calc(var(--dock-h) + 12px);z-index:60}
#status-popover[hidden]{display:none}
#status-popover .tip-card{
  background:rgba(15,20,26,.98);border:1px solid rgba(255,255,255,.08);
  border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.35);padding:12px;
}
#status-popover .tip-title{font-weight:600;margin-bottom:8px}
#status-popover .tip-list{margin:0;padding-left:16px;color:var(--text)}
#status-popover .tip-list li{margin:6px 0}
#status-popover #btn-tip-close{margin-top:10px}

/* Служебные подсказки */
.hint{min-height:18px;text-align:center;color:var(--muted);padding:4px 0 8px}
.hint .err{color:#ff8a8a}
