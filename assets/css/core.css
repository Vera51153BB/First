:root{
  --bg:#050029;
  --text:#e6ddcd;
  --green:#79c172;
  --red:#ff5f5f;
  --muted:#a7a093;

  --card-r: 20px;
  --v-gap: clamp(14px,3.5vw,22px);

  --pill-h: clamp(40px,9vw,56px);
  --pill-w: clamp(180px,60vw,320px);
  --radius: 999px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height:1.35;
  display:flex; justify-content:center;
}

.wrap{
  width:min(680px,92vw);
  padding:clamp(16px,3vw,28px);
  display:flex; flex-direction:column;
}

/* Верхняя панель */
/* ===== Topbar: right-aligned Help + Language ===== */
/* === Topbar (правый верх, Help + Language) === */
.topbar{
  display:flex;
  justify-content:flex-end;    /* уводим элементы вправо */
  gap:12px;
  margin-bottom: clamp(14px,3vw,22px);
}

.topbar-right{
  display:flex;
  align-items:center;
  gap:10px;                     /* между Help и языком */
}

.help-btn{
  background:none;
  border:1px solid var(--text);
  border-radius:999px;
  padding:6px 14px;
  font-weight:600;
  color:var(--text);
  font-size:clamp(13px,3vw,16px);
  cursor:pointer;
  transition:background .2s, color .2s;
}
.help-btn:hover{ background:rgba(255,255,255,.08); }

.lang-switch{
  display:flex;
  gap:6px;
}
.lang-switch button{
  background:none;
  border:1px solid transparent;
  border-radius:999px;
  padding:6px 12px;
  font-weight:600;
  font-size:clamp(13px,3vw,16px);
  color:var(--text);
  cursor:pointer;
  transition:background .2s, color .2s;
}
.lang-switch button.active{
  background:#e6ddcd;   /* бело-бежевый */
  color:#050029;        /* тёмный текст */
  border-color:#e6ddcd;
}
.lang-switch button:hover:not(.active){
  background:rgba(255,255,255,.08);
}
/* Конец верхней языковой панели*/

h1{
  margin:0 0 .8rem;font-weight:800;letter-spacing:.02em;
  font-size:clamp(21px,5vw,29px); text-transform:uppercase;
}

/* Вертикальная колонка */
.stack{
  display:flex; flex-direction:column;
  gap: var(--v-gap);
  padding-bottom: var(--v-gap);
}

/* Карточки */
.section{
  padding:clamp(12px,2.6vw,18px);
  border:1px solid #2a2458;
  border-radius:var(--card-r);
  background:rgba(255,255,255,.02);
}

.title{ font-size:clamp(16px,3.6vw,22px); font-weight:700 }

/* Шапка секции «все» */
.controls-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom:clamp(10px,2.5vw,14px);
}
.status-badge{
  display:inline-block; padding:.25em .8em; border-radius:999px;
  font-size:clamp(12px,2.8vw,14px); font-weight:700;
  background:#211a53; color:var(--text); border:1px solid #3a3276;
}

/* Две большие кнопки */
.actions{ display:flex; gap:clamp(10px,2.6vw,14px) }
.btn{
  border:none; cursor:pointer; border-radius:999px;
  padding: clamp(10px,2.6vw,14px) clamp(18px,4.4vw,26px);
  font-size:clamp(14px,3.6vw,18px); font-weight:800; letter-spacing:.02em;
  color:#050029; transition:transform .08s ease, filter .2s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
  flex: 1 1 0;
  white-space: nowrap;

  position: relative;
  overflow: hidden;
}
.btn.green{ background:var(--green) }
.btn.red  { background:var(--red) }
.btn:active{ transform:translateY(1px) scale(.985); filter:brightness(.98) }
.btn:focus-visible{ outline:2px solid #8aa3ff; outline-offset:2px }

/* Риппл у .btn и .save-btn */
.btn::after, .save-btn::after{
  content:"";
  position:absolute;
  left: var(--rx,50%); top: var(--ry,50%);
  width:0; height:0; border-radius:50%;
  background: rgba(255,255,255,.35);
  transform: translate(-50%,-50%);
  opacity:0; pointer-events:none;
}
.rippling::after{ animation: btn-ripple .5s ease-out; }
@keyframes btn-ripple{
  0%   { width:0; height:0; opacity:.35; }
  80%  { width:360px; height:360px; opacity:.12; }
  100% { width:420px; height:420px; opacity:0; }
}

/* Список уведомлений — единая раскладка (desktop = mobile)
   1-я строка: .item-head  →  название слева (.name), статус справа (.state)
   2-я строка: .item-controls → тумблер слева (.switch), шестерёнка справа (.gear-btn) */
.item{
  display: grid;
  grid-template-columns: 1fr;   /* одна колонка для всех экранов */
  gap: 8px;
  align-items: start;
  padding: 12px 0;
}
.item + .item{ border-top:1px dashed #2a2458; }

.item-head{
  display: flex;
  align-items: center;
  justify-content: space-between; /* имя слева, статус справа */
  gap: 10px;
}

.item-controls{
  display: flex;
  align-items: center;
  justify-content: space-between; /* тумблер слева, шестерёнка справа */
  gap: 12px;
}

/* типографика */
.name{ font-size: clamp(15px,3.2vw,20px); }
.state{ color: var(--muted); font-size: clamp(12px,2.8vw,14px); }

/* тумблер должен быть «пилюлей», занимать всю доступную ширину */
.item-controls .switch{
  flex: 1 1 auto;
  min-width: 220px;    /* чтобы не схлопывался */
  margin-top: 2px;
}

/* починка «белого прямоугольника» если что-то перезаписало button */
button.switch{
  appearance: none;
  -webkit-appearance: none;
  display: inline-flex;               /* важно, чтобы лейблы шли в строку */
  background: linear-gradient(90deg, var(--green) 0 50%, var(--red) 50% 100%);
  border: 1px solid #382f78;
}

/* Переключатель */
.switch{
  --pad:6px;
  position:relative; width:var(--pill-w); height:var(--pill-h);
  border-radius:var(--radius); border:1px solid #382f78;
  background:linear-gradient(90deg, var(--green) 0 50%, var(--red) 50% 100%);
  display:inline-flex; align-items:center; justify-content:space-between;
  padding:0 var(--pad); color:#050029; user-select:none; cursor:pointer;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 6px 18px rgba(0,0,0,.25);
}
.switch .label{
  font-weight:900; letter-spacing:.03em; text-transform:uppercase;
  font-size:clamp(12px,2.8vw,16px); width:50%;
  display:flex; align-items:center; justify-content:center; white-space:nowrap;
  opacity:.65; transition:opacity .18s;
}
.switch[data-on="true"]  .label:first-child{ opacity:1; }
.switch[data-on="false"] .label:last-child { opacity:1; }

.switch .knob{
  position:absolute; top:50%; transform:translateY(-50%);
  width: calc(var(--pill-h) - var(--pad)*2); height: calc(var(--pill-h) - var(--pad)*2);
  border-radius:50%; background:#2d2a59;
  box-shadow: 0 6px 12px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
  transition: left .22s cubic-bezier(.2,.9,.2,1.2), box-shadow .2s;
  left: var(--pad);
}
.switch[data-on="false"] .knob{ left: calc(100% - var(--pill-h) + var(--pad)) }
.switch[data-on="true"]  .knob{ box-shadow: 0 8px 16px rgba(0,0,0,.42), inset 0 0 0 1px rgba(255,255,255,.08); }

/* Мягкая подсветка */
.switch::before{
  content:"";
  position:absolute; inset:2px; border-radius:var(--radius);
  background:
    linear-gradient(90deg,
      rgba(121,193,114,.25) 0 50%,
      rgba(255,95,95,.25) 50% 100%);
  mix-blend-mode: screen;
  opacity:.25; transition:opacity .22s;
}

/* Клавиатурный фокус */
.switch:focus-visible{ outline:2px solid #8aa3ff; outline-offset:3px }

/* Кнопка «Сохранить настройки» */
.save-btn{
  width:100%;
  border-radius: var(--card-r);
  border: 1px solid var(--text);
  background: var(--bg);
  color: var(--text);
  padding: clamp(14px,3.5vw,18px);
  font-weight:800; letter-spacing:.02em;
  font-size: clamp(16px,4vw,22px);
  text-align:center;
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
  cursor:pointer;
  transition: transform .08s ease, filter .2s ease;
  position:relative; overflow:hidden;
}
.save-btn:active{ transform: translateY(1px) scale(.99) }
.save-btn:focus-visible{ outline:2px solid #8aa3ff; outline-offset:3px }

/* «Успешно сохранено» — вспышка */
.save-btn.saved{ animation: saved-flash 650ms ease-out; }
@keyframes saved-flash{
  0%   { box-shadow: 0 0 0 0 rgba(121,193,114,.0), 0 6px 18px rgba(0,0,0,.25); }
  40%  { box-shadow: 0 0 0 10px rgba(121,193,114,.25), 0 10px 22px rgba(0,0,0,.3); }
  100% { box-shadow: 0 0 0 0 rgba(121,193,114,.0), 0 6px 18px rgba(0,0,0,.25); }
}
.btn.is-busy, .save-btn.is-busy{ pointer-events:none; opacity:.7; filter:grayscale(.15); }

/* Подпись внизу */
.footnote{ color:var(--muted); text-align:center; font-size:clamp(12px,2.8vw,14px) }

/* быстрый тост для браузера */
.toast{
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%);
  background: #1b1645;
  color: #e6ddcd;
  border: 1px solid #3a3276;
  border-radius: 12px;
  padding: 12px 16px;
  opacity: 0;
  transition: opacity .2s;
  z-index: 9999;
}
.toast.show{ opacity: 1; }

/* === Правый блок: тумблер + кнопка настроек === */
.actions-cell{
  display:flex;
  align-items:center;
  gap:12px;
}

/* ====== simple text for "All notifications: ..." ====== */
/* --- «все уведомления: <статус>» как простой текст --- */
.all-state{
  font-weight: 800;
  margin-left: .4em;
}

/* ====== gear button (settings) on each row ====== */
.gear-btn{
  position: relative;                    /* нужно для риппла (::after) */
  display: inline-grid;
  place-items: center;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid #3a3276;
  background: transparent;
  color: var(--text);
  cursor: pointer;

  /* эффекты */
  transition:
    background .20s ease,
    border-color .20s ease,
    transform .08s ease,
    filter .20s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
}
.gear-btn:hover{
  background: rgba(255,255,255,.06);
  border-color: #554bb0;
  filter: brightness(1.02);
}
.gear-btn:active{
  transform: translateY(1px) scale(.98);
}
.gear-btn:focus-visible{
  outline: 2px solid #8aa3ff;
  outline-offset: 2px;
}

/* иконка внутри шестерёнки */
.gear-btn svg{
  width: 22px;
  height: 22px;
  stroke: #c7c1b5;
  fill: none;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
  transition: stroke .20s ease, transform .12s ease;
}
.gear-btn:hover svg{
  stroke: #9fd19a;                       /* мягкая подсветка как у зелёных кнопок */
}
.gear-btn:active svg{
  transform: scale(.96);
}

/* ripple — такой же механизм, как у .btn/.save-btn */
.gear-btn::after{
  content: "";
  position: absolute;
  left: var(--rx,50%);
  top:  var(--ry,50%);
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255,255,255,.35);
  transform: translate(-50%,-50%);
  opacity: 0;
  pointer-events: none;
}
.gear-btn.rippling::after{ animation: btn-ripple .5s ease-out; } /* используем ту же @keyframes */


/* === Универсальная "маленькая" кнопка в стиле save-btn (контурная) === */
.btn-outline{
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--text);
  border-radius: var(--radius);
  padding: 6px 14px;
  font-weight: 700;
  font-size: clamp(13px,3vw,16px);
  line-height: 1;
  cursor: pointer;
  transition: transform .08s ease, filter .2s ease, background .2s ease, color .2s ease;
}
.btn-outline:active{ transform: translateY(1px) scale(.99); }
.btn-outline:focus-visible{ outline:2px solid #8aa3ff; outline-offset:2px; }
.btn-outline:hover{ background: rgba(255,255,255,.06); }

/* Применяем единый стиль к "Помощь" и языкам */
.help-btn{ all: unset; }
.help-btn, .lang-switch button{ /* тот же вид, что у save-btn, но мини */
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--text);
  border-radius: var(--radius);
  padding: 6px 12px;
  font-weight: 700;
  font-size: clamp(13px,3vw,16px);
  line-height: 1;
  cursor: pointer;
  transition: transform .08s ease, filter .2s ease, background .2s ease, color .2s ease;
}
.help-btn:hover, .lang-switch button:hover{ background: rgba(255,255,255,.06); }
.help-btn:active, .lang-switch button:active{ transform: translateY(1px) scale(.99); }
.help-btn:focus-visible, .lang-switch button:focus-visible{
  outline:2px solid #8aa3ff; outline-offset:2px;
}

/* Активный язык: бежевый маркер-точка + тёмно-синие буквы */
.lang-switch button.active{
  background: var(--text);   /* бело-бежевый фон */
  color: var(--bg);          /* глубокий тёмно-синий текст */
  border-color: var(--text);
  position: relative;
}
.lang-switch button.active::before{
  content:"";
  display:inline-block;
  width: 8px; height: 8px;
  border-radius: 999px;
  background: var(--text);   /* кружок в цвет шрифта (бежевый) */
  margin-right: 8px;
  vertical-align: middle;
}

/* Кнопка-шестерёнка (настройки) — тоже в общем стиле */
.gear-btn{
  background: var(--bg);
  color: var(--text);
  border: 1px solid var(--text);
  border-radius: 999px;
  width: 40px; height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: transform .08s ease, background .2s ease, color .2s ease;
  margin-left: 10px;
}
.gear-btn:hover{ background: rgba(255,255,255,.06); }
.gear-btn:active{ transform: translateY(1px) scale(.99); }

/* простая иконка-«три линии» без SVG (можно заменить своим SVG) */
.gear-btn .gear-ico{
  width: 16px; height: 12px; position: relative;
}
.gear-btn .gear-ico::before,
.gear-btn .gear-ico::after{
  content:""; position:absolute; left:0; right:0; height:2px; background: currentColor;
}
.gear-btn .gear-ico::before{ top:0; box-shadow: 0 5px 0 0 currentColor; }
.gear-btn .gear-ico::after{ bottom:0; }

/* --- Help button: иконка "?" в кружке, стилистика как у активных кнопок --- */
.help-btn{
  display:inline-flex; align-items:center; gap:8px;
  background: none; border:1px solid var(--text); border-radius:999px;
  padding:6px 14px; font-weight:700; color:var(--text);
  font-size:clamp(13px,3vw,16px); cursor:pointer;
  transition: background .2s,color .2s,box-shadow .2s;
}
.help-btn:hover{ background:rgba(255,255,255,.08); }
.help-btn .qmark{
  display:inline-grid; place-items:center;
  width:20px; height:20px; border-radius:50%;
  background: var(--text); color:#050029; font-weight:900; font-size:12px;
}

/* =========================================================
   Topbar: Help + Language (SVG icons + dropdown)
   Требует SVG внутри кнопок (см. alerts.html)
   ========================================================= */

/* Контейнер справа (рядом): Help + Language */
.topbar-right{
  display:flex;
  align-items:center;
  gap:12px;
  justify-content:flex-end;
}

/* Унифицированные «пилюли» (Help, Language trigger) */
.pill{
  display:inline-grid;
  grid-auto-flow:column;
  align-items:center;
  gap:8px;
  padding:6px 12px;
  border-radius:999px;
  font-weight:700;
  font-size:clamp(12px,2.8vw,14px);
  line-height:1;
  cursor:pointer;
  user-select:none;
  transition:background .2s, color .2s, border-color .2s, transform .08s ease;
  position:relative;         /* для ripple */
  overflow:hidden;           /* для ripple */
}
.pill-outline{
  background:transparent;
  color:var(--text);
  border:1px solid var(--text);
}
.pill-outline:hover{ background:rgba(255,255,255,.06); border-color:#cfc7b9; }
.pill:active{ transform:translateY(1px) scale(.985); }

/* SVG-иконки внутри пилюль (глобус и знак вопроса одинаковые) */
.pill .icon-svg{
  width:18px; height:18px;
  stroke:#7dc0f8;           /* голубой контур */
  fill:none;
  stroke-width:2;
  stroke-linecap:round;
  stroke-linejoin:round;
}

/* Ripple для .pill (использует уже существующий @keyframes btn-ripple) */
.pill::after{
  content:"";
  position:absolute;
  left:var(--rx,50%); top:var(--ry,50%);
  width:0; height:0; border-radius:50%;
  background:rgba(255,255,255,.35);
  transform:translate(-50%,-50%);
  opacity:0; pointer-events:none;
}
.pill.rippling::after{ animation: btn-ripple .5s ease-out; }

/* Dropdown языка */
.lang-menu{ position:relative; z-index:100; }
.lang-menu .lang-list{
  position:absolute;
  right:0;
  top:calc(100% + 8px);
  display:none;                     /* по умолчанию скрыто */
  min-width:180px;
  background:#1b1645;
  color:var(--text);
  border:1px solid #3a3276;
  border-radius:12px;
  padding:6px;
  box-shadow:0 10px 24px rgba(0,0,0,.35);
}
.lang-menu.open .lang-list{ display:block; }   /* класс .open ставит JS */

.lang-list li{
  display:grid;
  grid-auto-flow:column;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:8px;
  cursor:pointer;
  white-space:nowrap;
}
.lang-list li:hover{ background:rgba(255,255,255,.06); }

/* Индикатор текущего языка (точка) */
.lang-list .dot{
  width:10px; height:10px; border-radius:50%;
  border:2px solid #7dc0f8;        /* такой же голубой как у иконок */
}
.lang-list li.active .dot{ background:#7dc0f8; }

/* ===== Двухстрочная карточка уведомления (name ↑, ниже state + switch + gear) ===== */
.item.item--stacked{               /* принудительно блочная раскладка вместо grid из .item */
  display:block;
}

.item-controls{                    /* нижняя строка с состоянием, тумблером и шестерёнкой */
  display:grid;
  grid-template-columns: auto 1fr auto;  /* state | switch | gear */
  align-items:center;
  gap:10px;
  margin-top:6px;
}

/* мелочь для узких экранов: тумблеру не надо прижиматься вправо */
@media (max-width: 786px){
  .item.item--stacked .item-controls .switch{ justify-self: stretch; }
}

/* === Макет строки: верх — name | state, низ — gear | (switch справа) === */
.item--split{
  display:block;                 /* отказываемся от старой 2-колоночной сетки */
  padding:12px 0;
}
.item--split + .item--split{ border-top:1px dashed #2a2458; }

/* верхний ряд: название слева, статус справа */
.item--split .row-top{
  display:grid;
  grid-template-columns: 1fr auto;  /* name | state */
  align-items:center;
  gap:12px;
}
.item--split .row-top .name{ margin:0; }
.item--split .row-top .state{ margin:0; }

/* нижний ряд: шестерёнка слева, тумблер справа */
.item--split .row-bottom{
  margin-top:8px;
  display:grid;
  grid-template-columns: auto 1fr;   /* gear | switch (растягиваем трек) */
  align-items:center;
  gap:10px;
}
.item--split .row-bottom .switch{
  justify-self:end;                  /* тумблер прижат к правому краю */
}

/* адаптив: просто уменьшаем зазоры */
@media (max-width: 786px){
  .item--split .row-top{ gap:10px; }
  .item--split .row-bottom{ margin-top:6px; gap:8px; }
}
