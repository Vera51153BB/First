<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>OKX SWAP Chart</title>

  <!-- CSP: Telegram, OKX REST/WS, TradingView, unpkg -->
  <meta http-equiv="Content-Security-Policy"
    content="
      default-src 'self' https://telegram.org https://s3.tradingview.com https://*.tradingview.com https://unpkg.com;
      img-src 'self' data: https:;
      style-src 'self';
      script-src 'self' https://telegram.org https://s3.tradingview.com https://unpkg.com;
      connect-src 'self' https://www.okx.com wss://ws.okx.com wss://wsaws.okx.com;
    ">

  <link rel="stylesheet" href="./assets/css/chart.css">

  <!-- внешние скрипты -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>

  <!-- наши модули -->
  <script defer src="./assets/js/okx_chart.js"></script>
  <script defer src="./assets/js/ui_panel.js"></script>
</head>
<body>
  <div id="wrap">
    <header id="title">BTC • USDT-SWAP (OKX)</header>
    <div id="chart" aria-label="График"></div>

    <!-- ФИКСИРОВАННАЯ НИЖНЯЯ ПОЛОСА (только логотипы-кнопки) -->
    <footer id="dock" role="toolbar" aria-label="Выбор источника">
      <div id="status-dot" class="offline" aria-hidden="true" title="Статус соединения"></div>

      <!-- КНОПКИ-ЛОГОТИПЫ -->
      <button class="brand" data-src="okx"   aria-pressed="false" title="OKX (API/WS)">
        <img src="./images/okx-logotype-light.png" alt="OKX">
      </button>
      <button class="brand" data-src="tv"    aria-pressed="false" title="TradingView (виджет)">
        <img src="./images/tradingview-logotype-light.png" alt="TradingView">
      </button>
      <button class="brand" data-src="vp"    aria-pressed="false" title="Volume Profile (ссылка)">
        <img src="./images/vp-logotype-light.png" alt="VP">
      </button>

      <div class="spacer" aria-hidden="true"></div>

      <!-- Квадратная кнопка со стрелкой (действий уже нет; оставлена как «вверх страницы») -->
      <button id="btn-to-top" type="button" title="К началу">
        <span class="sr-only">К началу</span>
      </button>
    </footer>
  </div>
</body>
</html>
